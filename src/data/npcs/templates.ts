import type { NPC } from '../../stores/campaignStore'

type NPCTemplate = Omit<NPC, 'id' | 'createdAt'>

export const NPC_TEMPLATES: Record<string, NPCTemplate> = {
  commoner: {
    name: 'Commoner',
    type: 'Humanoid',
    alignment: 'True Neutral',
    challengeRating: '0',
    armorClass: 10,
    hitPoints: { current: 4, maximum: 4, formula: '1d8' },
    speed: { walk: 30 },
    abilityScores: {
      strength: 10,
      dexterity: 10,
      constitution: 10,
      intelligence: 10,
      wisdom: 10,
      charisma: 10,
    },
    actions: [
      {
        name: 'Club',
        description: 'Melee Weapon Attack: +2 to hit, reach 5 ft., one target.',
        attackBonus: 2,
        damage: '1d4',
        damageType: 'Bludgeoning',
      },
    ],
    languages: ['Common'],
    isTemplate: true,
  },

  guard: {
    name: 'Guard',
    type: 'Humanoid',
    alignment: 'Lawful Neutral',
    challengeRating: '1/8',
    armorClass: 16,
    hitPoints: { current: 11, maximum: 11, formula: '2d8+2' },
    speed: { walk: 30 },
    abilityScores: {
      strength: 13,
      dexterity: 12,
      constitution: 12,
      intelligence: 10,
      wisdom: 11,
      charisma: 10,
    },
    skills: ['Perception +2'],
    actions: [
      {
        name: 'Spear',
        description: 'Melee or Ranged Weapon Attack: +3 to hit, reach 5 ft. or range 20/60 ft., one target.',
        attackBonus: 3,
        damage: '1d6+1',
        damageType: 'Piercing',
      },
    ],
    languages: ['Common'],
    isTemplate: true,
  },

  bandit: {
    name: 'Bandit',
    type: 'Humanoid',
    alignment: 'Chaotic Evil',
    challengeRating: '1/8',
    armorClass: 12,
    hitPoints: { current: 11, maximum: 11, formula: '2d8+2' },
    speed: { walk: 30 },
    abilityScores: {
      strength: 11,
      dexterity: 12,
      constitution: 12,
      intelligence: 10,
      wisdom: 10,
      charisma: 10,
    },
    actions: [
      {
        name: 'Scimitar',
        description: 'Melee Weapon Attack: +3 to hit, reach 5 ft., one target.',
        attackBonus: 3,
        damage: '1d6+1',
        damageType: 'Slashing',
      },
      {
        name: 'Light Crossbow',
        description: 'Ranged Weapon Attack: +3 to hit, range 80/320 ft., one target.',
        attackBonus: 3,
        damage: '1d8+1',
        damageType: 'Piercing',
      },
    ],
    languages: ['Common'],
    isTemplate: true,
  },

  cultist: {
    name: 'Cultist',
    type: 'Humanoid',
    alignment: 'Neutral Evil',
    challengeRating: '1/8',
    armorClass: 12,
    hitPoints: { current: 9, maximum: 9, formula: '2d8' },
    speed: { walk: 30 },
    abilityScores: {
      strength: 11,
      dexterity: 12,
      constitution: 10,
      intelligence: 10,
      wisdom: 11,
      charisma: 10,
    },
    skills: ['Deception +2', 'Religion +2'],
    actions: [
      {
        name: 'Scimitar',
        description: 'Melee Weapon Attack: +3 to hit, reach 5 ft., one target.',
        attackBonus: 3,
        damage: '1d6+1',
        damageType: 'Slashing',
      },
    ],
    languages: ['Common'],
    description: 'Dark Devotion. The cultist has advantage on saving throws against being charmed or frightened.',
    isTemplate: true,
  },

  goblin: {
    name: 'Goblin',
    type: 'Humanoid',
    race: 'Goblinoid',
    alignment: 'Neutral Evil',
    challengeRating: '1/4',
    armorClass: 15,
    hitPoints: { current: 7, maximum: 7, formula: '2d6' },
    speed: { walk: 30 },
    abilityScores: {
      strength: 8,
      dexterity: 14,
      constitution: 10,
      intelligence: 10,
      wisdom: 8,
      charisma: 8,
    },
    skills: ['Stealth +6'],
    senses: ['Darkvision 60 ft.'],
    actions: [
      {
        name: 'Scimitar',
        description: 'Melee Weapon Attack: +4 to hit, reach 5 ft., one target.',
        attackBonus: 4,
        damage: '1d6+2',
        damageType: 'Slashing',
      },
      {
        name: 'Shortbow',
        description: 'Ranged Weapon Attack: +4 to hit, range 80/320 ft., one target.',
        attackBonus: 4,
        damage: '1d6+2',
        damageType: 'Piercing',
      },
    ],
    languages: ['Common', 'Goblin'],
    description: 'Nimble Escape. The goblin can take the Disengage or Hide action as a bonus action on each of its turns.',
    isTemplate: true,
  },

  skeleton: {
    name: 'Skeleton',
    type: 'Undead',
    alignment: 'Lawful Evil',
    challengeRating: '1/4',
    armorClass: 13,
    hitPoints: { current: 13, maximum: 13, formula: '2d8+4' },
    speed: { walk: 30 },
    abilityScores: {
      strength: 10,
      dexterity: 14,
      constitution: 15,
      intelligence: 6,
      wisdom: 8,
      charisma: 5,
    },
    damageImmunities: ['Poison'],
    conditionImmunities: ['Exhaustion', 'Poisoned'],
    senses: ['Darkvision 60 ft.'],
    actions: [
      {
        name: 'Shortsword',
        description: 'Melee Weapon Attack: +4 to hit, reach 5 ft., one target.',
        attackBonus: 4,
        damage: '1d6+2',
        damageType: 'Piercing',
      },
      {
        name: 'Shortbow',
        description: 'Ranged Weapon Attack: +4 to hit, range 80/320 ft., one target.',
        attackBonus: 4,
        damage: '1d6+2',
        damageType: 'Piercing',
      },
    ],
    languages: ['Understands languages it knew in life but cannot speak'],
    isTemplate: true,
  },

  zombie: {
    name: 'Zombie',
    type: 'Undead',
    alignment: 'Neutral Evil',
    challengeRating: '1/4',
    armorClass: 8,
    hitPoints: { current: 22, maximum: 22, formula: '3d8+9' },
    speed: { walk: 20 },
    abilityScores: {
      strength: 13,
      dexterity: 6,
      constitution: 16,
      intelligence: 3,
      wisdom: 6,
      charisma: 5,
    },
    savingThrows: ['wisdom'],
    damageImmunities: ['Poison'],
    conditionImmunities: ['Poisoned'],
    senses: ['Darkvision 60 ft.'],
    actions: [
      {
        name: 'Slam',
        description: 'Melee Weapon Attack: +3 to hit, reach 5 ft., one target.',
        attackBonus: 3,
        damage: '1d6+1',
        damageType: 'Bludgeoning',
      },
    ],
    languages: ['Understands languages it knew in life but cannot speak'],
    description: 'Undead Fortitude. If damage reduces the zombie to 0 hit points, it must make a Constitution saving throw with a DC of 5 + the damage taken, unless the damage is radiant or from a critical hit. On a success, the zombie drops to 1 hit point instead.',
    isTemplate: true,
  },

  mage: {
    name: 'Mage',
    type: 'Humanoid',
    alignment: 'True Neutral',
    challengeRating: '6',
    armorClass: 12,
    hitPoints: { current: 40, maximum: 40, formula: '9d8' },
    speed: { walk: 30 },
    abilityScores: {
      strength: 9,
      dexterity: 14,
      constitution: 11,
      intelligence: 17,
      wisdom: 12,
      charisma: 11,
    },
    savingThrows: ['intelligence', 'wisdom'],
    skills: ['Arcana +6', 'History +6'],
    spellcasting: {
      ability: 'Intelligence',
      spellSaveDC: 14,
      spellAttackBonus: 6,
      slots: {
        '1st': 4,
        '2nd': 3,
        '3rd': 3,
        '4th': 3,
        '5th': 1,
      },
      spells: [
        'Cantrips: fire bolt, light, mage hand, prestidigitation',
        '1st level: detect magic, mage armor, magic missile, shield',
        '2nd level: misty step, suggestion',
        '3rd level: counterspell, fireball, fly',
        '4th level: greater invisibility, ice storm',
        '5th level: cone of cold',
      ],
    },
    actions: [
      {
        name: 'Dagger',
        description: 'Melee or Ranged Weapon Attack: +5 to hit, reach 5 ft. or range 20/60 ft., one target.',
        attackBonus: 5,
        damage: '1d4+2',
        damageType: 'Piercing',
      },
    ],
    languages: ['Common', 'Draconic', 'Elvish', 'Infernal'],
    isTemplate: true,
  },

  knight: {
    name: 'Knight',
    type: 'Humanoid',
    alignment: 'Lawful Good',
    challengeRating: '3',
    armorClass: 18,
    hitPoints: { current: 52, maximum: 52, formula: '8d8+16' },
    speed: { walk: 30 },
    abilityScores: {
      strength: 16,
      dexterity: 11,
      constitution: 14,
      intelligence: 11,
      wisdom: 11,
      charisma: 15,
    },
    savingThrows: ['constitution', 'wisdom'],
    actions: [
      {
        name: 'Multiattack',
        description: 'The knight makes two melee attacks.',
      },
      {
        name: 'Greatsword',
        description: 'Melee Weapon Attack: +5 to hit, reach 5 ft., one target.',
        attackBonus: 5,
        damage: '2d6+3',
        damageType: 'Slashing',
      },
      {
        name: 'Heavy Crossbow',
        description: 'Ranged Weapon Attack: +2 to hit, range 100/400 ft., one target.',
        attackBonus: 2,
        damage: '1d10',
        damageType: 'Piercing',
      },
      {
        name: 'Leadership (Recharges after a Short or Long Rest)',
        description: 'For 1 minute, the knight can utter a special command or warning whenever a nonhostile creature that it can see within 30 feet of it makes an attack roll or a saving throw. The creature can add a d4 to its roll provided it can hear and understand the knight.',
      },
    ],
    reactions: [
      {
        name: 'Parry',
        description: 'The knight adds 2 to its AC against one melee attack that would hit it. To do so, the knight must see the attacker and be wielding a melee weapon.',
      },
    ],
    languages: ['Common'],
    description: 'Brave. The knight has advantage on saving throws against being frightened.',
    isTemplate: true,
  },

  ogre: {
    name: 'Ogre',
    type: 'Giant',
    alignment: 'Chaotic Evil',
    challengeRating: '2',
    armorClass: 11,
    hitPoints: { current: 59, maximum: 59, formula: '7d10+21' },
    speed: { walk: 40 },
    abilityScores: {
      strength: 19,
      dexterity: 8,
      constitution: 16,
      intelligence: 5,
      wisdom: 7,
      charisma: 7,
    },
    senses: ['Darkvision 60 ft.'],
    actions: [
      {
        name: 'Greatclub',
        description: 'Melee Weapon Attack: +6 to hit, reach 5 ft., one target.',
        attackBonus: 6,
        damage: '2d8+4',
        damageType: 'Bludgeoning',
      },
      {
        name: 'Javelin',
        description: 'Melee or Ranged Weapon Attack: +6 to hit, reach 5 ft. or range 30/120 ft., one target.',
        attackBonus: 6,
        damage: '2d6+4',
        damageType: 'Piercing',
      },
    ],
    languages: ['Common', 'Giant'],
    isTemplate: true,
  },
}

export const NPC_TEMPLATE_CATEGORIES = {
  'Common NPCs': ['commoner', 'guard', 'bandit', 'cultist'],
  'Monsters': ['goblin', 'skeleton', 'zombie', 'ogre'],
  'Powerful': ['mage', 'knight'],
}
