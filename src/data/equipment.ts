import type { Weapon, Armor, Shield, GenericEquipment, Currency } from '../types/equipment'

const ZERO_COST: Currency = { copper: 0, silver: 0, electrum: 0, gold: 0, platinum: 0 }
const cost = (gold: number, silver = 0, copper = 0): Currency => ({
  ...ZERO_COST,
  gold,
  silver,
  copper,
})

// ============================================
// SIMPLE MELEE WEAPONS
// ============================================

export const SIMPLE_MELEE_WEAPONS: Weapon[] = [
  {
    id: 'club',
    name: 'Club',
    description: 'A simple wooden club.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d4', type: 'bludgeoning' },
    properties: ['light'],
    weight: 2,
    cost: cost(0, 1),
    quantity: 1,
  },
  {
    id: 'dagger',
    name: 'Dagger',
    description: 'A small blade useful for close combat or throwing.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d4', type: 'piercing' },
    properties: ['finesse', 'light', 'thrown'],
    range: { normal: 20, long: 60 },
    weight: 1,
    cost: cost(2),
    quantity: 1,
  },
  {
    id: 'greatclub',
    name: 'Greatclub',
    description: 'A large, two-handed wooden club.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d8', type: 'bludgeoning' },
    properties: ['twoHanded'],
    weight: 10,
    cost: cost(0, 2),
    quantity: 1,
  },
  {
    id: 'handaxe',
    name: 'Handaxe',
    description: 'A small axe designed for throwing or close combat.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d6', type: 'slashing' },
    properties: ['light', 'thrown'],
    range: { normal: 20, long: 60 },
    weight: 2,
    cost: cost(5),
    quantity: 1,
  },
  {
    id: 'javelin',
    name: 'Javelin',
    description: 'A light spear designed for throwing.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d6', type: 'piercing' },
    properties: ['thrown'],
    range: { normal: 30, long: 120 },
    weight: 2,
    cost: cost(0, 5),
    quantity: 1,
  },
  {
    id: 'light-hammer',
    name: 'Light Hammer',
    description: 'A small hammer useful for throwing or melee.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d4', type: 'bludgeoning' },
    properties: ['light', 'thrown'],
    range: { normal: 20, long: 60 },
    weight: 2,
    cost: cost(2),
    quantity: 1,
  },
  {
    id: 'mace',
    name: 'Mace',
    description: 'A weighted metal head on a wooden handle.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d6', type: 'bludgeoning' },
    properties: [],
    weight: 4,
    cost: cost(5),
    quantity: 1,
  },
  {
    id: 'quarterstaff',
    name: 'Quarterstaff',
    description: 'A versatile wooden staff.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d6', type: 'bludgeoning' },
    versatileDamage: '1d8',
    properties: ['versatile'],
    weight: 4,
    cost: cost(0, 2),
    quantity: 1,
  },
  {
    id: 'sickle',
    name: 'Sickle',
    description: 'A curved blade used for harvesting crops.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d4', type: 'slashing' },
    properties: ['light'],
    weight: 2,
    cost: cost(1),
    quantity: 1,
  },
  {
    id: 'spear',
    name: 'Spear',
    description: 'A pole weapon with a pointed tip.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'melee',
    damage: { dice: '1d6', type: 'piercing' },
    versatileDamage: '1d8',
    properties: ['thrown', 'versatile'],
    range: { normal: 20, long: 60 },
    weight: 3,
    cost: cost(1),
    quantity: 1,
  },
]

// ============================================
// SIMPLE RANGED WEAPONS
// ============================================

export const SIMPLE_RANGED_WEAPONS: Weapon[] = [
  {
    id: 'light-crossbow',
    name: 'Light Crossbow',
    description: 'A small crossbow that requires ammunition.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'ranged',
    damage: { dice: '1d8', type: 'piercing' },
    properties: ['ammunition', 'loading', 'twoHanded'],
    range: { normal: 80, long: 320 },
    weight: 5,
    cost: cost(25),
    quantity: 1,
  },
  {
    id: 'shortbow',
    name: 'Shortbow',
    description: 'A small bow suitable for quick shots.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'ranged',
    damage: { dice: '1d6', type: 'piercing' },
    properties: ['ammunition', 'twoHanded'],
    range: { normal: 80, long: 320 },
    weight: 2,
    cost: cost(25),
    quantity: 1,
  },
  {
    id: 'dart',
    name: 'Dart',
    description: 'A small thrown projectile.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'ranged',
    damage: { dice: '1d4', type: 'piercing' },
    properties: ['finesse', 'thrown'],
    range: { normal: 20, long: 60 },
    weight: 0.25,
    cost: cost(0, 0, 5),
    quantity: 1,
  },
  {
    id: 'sling',
    name: 'Sling',
    description: 'A simple weapon for hurling stones.',
    category: 'weapon',
    weaponType: 'simple',
    weaponCategory: 'ranged',
    damage: { dice: '1d4', type: 'bludgeoning' },
    properties: ['ammunition'],
    range: { normal: 30, long: 120 },
    weight: 0,
    cost: cost(0, 1),
    quantity: 1,
  },
]

// ============================================
// MARTIAL MELEE WEAPONS
// ============================================

export const MARTIAL_MELEE_WEAPONS: Weapon[] = [
  {
    id: 'battleaxe',
    name: 'Battleaxe',
    description: 'A versatile axe designed for combat.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d8', type: 'slashing' },
    versatileDamage: '1d10',
    properties: ['versatile'],
    weight: 4,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'flail',
    name: 'Flail',
    description: 'A spiked ball on a chain.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d8', type: 'bludgeoning' },
    properties: [],
    weight: 2,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'glaive',
    name: 'Glaive',
    description: 'A polearm with a curved blade.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d10', type: 'slashing' },
    properties: ['heavy', 'reach', 'twoHanded'],
    weight: 6,
    cost: cost(20),
    quantity: 1,
  },
  {
    id: 'greataxe',
    name: 'Greataxe',
    description: 'A massive two-handed axe.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d12', type: 'slashing' },
    properties: ['heavy', 'twoHanded'],
    weight: 7,
    cost: cost(30),
    quantity: 1,
  },
  {
    id: 'greatsword',
    name: 'Greatsword',
    description: 'A massive two-handed sword.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '2d6', type: 'slashing' },
    properties: ['heavy', 'twoHanded'],
    weight: 6,
    cost: cost(50),
    quantity: 1,
  },
  {
    id: 'halberd',
    name: 'Halberd',
    description: 'A polearm with an axe blade and spike.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d10', type: 'slashing' },
    properties: ['heavy', 'reach', 'twoHanded'],
    weight: 6,
    cost: cost(20),
    quantity: 1,
  },
  {
    id: 'lance',
    name: 'Lance',
    description: 'A long spear designed for mounted combat.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d12', type: 'piercing' },
    properties: ['reach', 'special'],
    weight: 6,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'longsword',
    name: 'Longsword',
    description: 'A versatile sword that can be wielded one or two-handed.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d8', type: 'slashing' },
    versatileDamage: '1d10',
    properties: ['versatile'],
    weight: 3,
    cost: cost(15),
    quantity: 1,
  },
  {
    id: 'maul',
    name: 'Maul',
    description: 'A massive two-handed hammer.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '2d6', type: 'bludgeoning' },
    properties: ['heavy', 'twoHanded'],
    weight: 10,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'morningstar',
    name: 'Morningstar',
    description: 'A spiked mace.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d8', type: 'piercing' },
    properties: [],
    weight: 4,
    cost: cost(15),
    quantity: 1,
  },
  {
    id: 'pike',
    name: 'Pike',
    description: 'A very long spear.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d10', type: 'piercing' },
    properties: ['heavy', 'reach', 'twoHanded'],
    weight: 18,
    cost: cost(5),
    quantity: 1,
  },
  {
    id: 'rapier',
    name: 'Rapier',
    description: 'A thin, pointed blade favored by duelists.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d8', type: 'piercing' },
    properties: ['finesse'],
    weight: 2,
    cost: cost(25),
    quantity: 1,
  },
  {
    id: 'scimitar',
    name: 'Scimitar',
    description: 'A curved blade designed for slashing.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d6', type: 'slashing' },
    properties: ['finesse', 'light'],
    weight: 3,
    cost: cost(25),
    quantity: 1,
  },
  {
    id: 'shortsword',
    name: 'Shortsword',
    description: 'A short blade for quick attacks.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d6', type: 'piercing' },
    properties: ['finesse', 'light'],
    weight: 2,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'trident',
    name: 'Trident',
    description: 'A three-pronged spear.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d6', type: 'piercing' },
    versatileDamage: '1d8',
    properties: ['thrown', 'versatile'],
    range: { normal: 20, long: 60 },
    weight: 4,
    cost: cost(5),
    quantity: 1,
  },
  {
    id: 'war-pick',
    name: 'War Pick',
    description: 'A military pick designed to pierce armor.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d8', type: 'piercing' },
    properties: [],
    weight: 2,
    cost: cost(5),
    quantity: 1,
  },
  {
    id: 'warhammer',
    name: 'Warhammer',
    description: 'A versatile hammer for combat.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d8', type: 'bludgeoning' },
    versatileDamage: '1d10',
    properties: ['versatile'],
    weight: 2,
    cost: cost(15),
    quantity: 1,
  },
  {
    id: 'whip',
    name: 'Whip',
    description: 'A flexible weapon with long reach.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'melee',
    damage: { dice: '1d4', type: 'slashing' },
    properties: ['finesse', 'reach'],
    weight: 3,
    cost: cost(2),
    quantity: 1,
  },
]

// ============================================
// MARTIAL RANGED WEAPONS
// ============================================

export const MARTIAL_RANGED_WEAPONS: Weapon[] = [
  {
    id: 'blowgun',
    name: 'Blowgun',
    description: 'A tube for shooting darts using breath.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'ranged',
    damage: { dice: '1', type: 'piercing' },
    properties: ['ammunition', 'loading'],
    range: { normal: 25, long: 100 },
    weight: 1,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'hand-crossbow',
    name: 'Hand Crossbow',
    description: 'A small, one-handed crossbow.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'ranged',
    damage: { dice: '1d6', type: 'piercing' },
    properties: ['ammunition', 'light', 'loading'],
    range: { normal: 30, long: 120 },
    weight: 3,
    cost: cost(75),
    quantity: 1,
  },
  {
    id: 'heavy-crossbow',
    name: 'Heavy Crossbow',
    description: 'A large, powerful crossbow.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'ranged',
    damage: { dice: '1d10', type: 'piercing' },
    properties: ['ammunition', 'heavy', 'loading', 'twoHanded'],
    range: { normal: 100, long: 400 },
    weight: 18,
    cost: cost(50),
    quantity: 1,
  },
  {
    id: 'longbow',
    name: 'Longbow',
    description: 'A tall bow with excellent range.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'ranged',
    damage: { dice: '1d8', type: 'piercing' },
    properties: ['ammunition', 'heavy', 'twoHanded'],
    range: { normal: 150, long: 600 },
    weight: 2,
    cost: cost(50),
    quantity: 1,
  },
  {
    id: 'net',
    name: 'Net',
    description: 'A mesh weapon to restrain foes.',
    category: 'weapon',
    weaponType: 'martial',
    weaponCategory: 'ranged',
    damage: { dice: '0', type: 'bludgeoning' },
    properties: ['special', 'thrown'],
    range: { normal: 5, long: 15 },
    weight: 3,
    cost: cost(1),
    quantity: 1,
  },
]

// ============================================
// ARMOR
// ============================================

export const LIGHT_ARMOR: Armor[] = [
  {
    id: 'padded',
    name: 'Padded Armor',
    description: 'Quilted layers of cloth and batting.',
    category: 'armor',
    armorType: 'light',
    baseAC: 11,
    stealthDisadvantage: true,
    weight: 8,
    cost: cost(5),
    quantity: 1,
  },
  {
    id: 'leather',
    name: 'Leather Armor',
    description: 'Chest and shoulder protection made of leather.',
    category: 'armor',
    armorType: 'light',
    baseAC: 11,
    stealthDisadvantage: false,
    weight: 10,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'studded-leather',
    name: 'Studded Leather',
    description: 'Leather reinforced with metal rivets.',
    category: 'armor',
    armorType: 'light',
    baseAC: 12,
    stealthDisadvantage: false,
    weight: 13,
    cost: cost(45),
    quantity: 1,
  },
]

export const MEDIUM_ARMOR: Armor[] = [
  {
    id: 'hide',
    name: 'Hide Armor',
    description: 'Crude armor made from thick furs and pelts.',
    category: 'armor',
    armorType: 'medium',
    baseAC: 12,
    maxDexBonus: 2,
    stealthDisadvantage: false,
    weight: 12,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'chain-shirt',
    name: 'Chain Shirt',
    description: 'Interlocking metal rings worn as a shirt.',
    category: 'armor',
    armorType: 'medium',
    baseAC: 13,
    maxDexBonus: 2,
    stealthDisadvantage: false,
    weight: 20,
    cost: cost(50),
    quantity: 1,
  },
  {
    id: 'scale-mail',
    name: 'Scale Mail',
    description: 'Armor with overlapping metal scales.',
    category: 'armor',
    armorType: 'medium',
    baseAC: 14,
    maxDexBonus: 2,
    stealthDisadvantage: true,
    weight: 45,
    cost: cost(50),
    quantity: 1,
  },
  {
    id: 'breastplate',
    name: 'Breastplate',
    description: 'A fitted metal chest piece.',
    category: 'armor',
    armorType: 'medium',
    baseAC: 14,
    maxDexBonus: 2,
    stealthDisadvantage: false,
    weight: 20,
    cost: cost(400),
    quantity: 1,
  },
  {
    id: 'half-plate',
    name: 'Half Plate',
    description: 'Metal plates protecting vital areas.',
    category: 'armor',
    armorType: 'medium',
    baseAC: 15,
    maxDexBonus: 2,
    stealthDisadvantage: true,
    weight: 40,
    cost: cost(750),
    quantity: 1,
  },
]

export const HEAVY_ARMOR: Armor[] = [
  {
    id: 'ring-mail',
    name: 'Ring Mail',
    description: 'Leather with heavy rings sewn into it.',
    category: 'armor',
    armorType: 'heavy',
    baseAC: 14,
    maxDexBonus: 0,
    stealthDisadvantage: true,
    weight: 40,
    cost: cost(30),
    quantity: 1,
  },
  {
    id: 'chain-mail',
    name: 'Chain Mail',
    description: 'Full suit of interlocking metal rings.',
    category: 'armor',
    armorType: 'heavy',
    baseAC: 16,
    maxDexBonus: 0,
    strengthRequirement: 13,
    stealthDisadvantage: true,
    weight: 55,
    cost: cost(75),
    quantity: 1,
  },
  {
    id: 'splint',
    name: 'Splint Armor',
    description: 'Metal strips riveted to leather backing.',
    category: 'armor',
    armorType: 'heavy',
    baseAC: 17,
    maxDexBonus: 0,
    strengthRequirement: 15,
    stealthDisadvantage: true,
    weight: 60,
    cost: cost(200),
    quantity: 1,
  },
  {
    id: 'plate',
    name: 'Plate Armor',
    description: 'Full suit of interlocking metal plates.',
    category: 'armor',
    armorType: 'heavy',
    baseAC: 18,
    maxDexBonus: 0,
    strengthRequirement: 15,
    stealthDisadvantage: true,
    weight: 65,
    cost: cost(1500),
    quantity: 1,
  },
]

// ============================================
// SHIELDS
// ============================================

export const SHIELDS: Shield[] = [
  {
    id: 'shield',
    name: 'Shield',
    description: 'A wooden or metal shield strapped to the arm.',
    category: 'shield',
    acBonus: 2,
    weight: 6,
    cost: cost(10),
    quantity: 1,
  },
]

// ============================================
// ADVENTURING GEAR
// ============================================

export const ADVENTURING_GEAR: GenericEquipment[] = [
  {
    id: 'backpack',
    name: 'Backpack',
    description: 'A leather pack for carrying equipment.',
    category: 'adventuringGear',
    weight: 5,
    cost: cost(2),
    quantity: 1,
  },
  {
    id: 'bedroll',
    name: 'Bedroll',
    description: 'A sleeping roll for rest in the wilderness.',
    category: 'adventuringGear',
    weight: 7,
    cost: cost(1),
    quantity: 1,
  },
  {
    id: 'rations',
    name: 'Rations (1 day)',
    description: 'Dried food suitable for travel.',
    category: 'adventuringGear',
    weight: 2,
    cost: cost(0, 5),
    quantity: 1,
  },
  {
    id: 'rope-hemp',
    name: 'Rope, Hempen (50 ft)',
    description: 'Strong hemp rope.',
    category: 'adventuringGear',
    weight: 10,
    cost: cost(1),
    quantity: 1,
  },
  {
    id: 'tinderbox',
    name: 'Tinderbox',
    description: 'Flint, fire steel, and tinder for starting fires.',
    category: 'adventuringGear',
    weight: 1,
    cost: cost(0, 5),
    quantity: 1,
  },
  {
    id: 'torch',
    name: 'Torch',
    description: 'Burns for 1 hour, providing bright light in a 20-foot radius.',
    category: 'adventuringGear',
    weight: 1,
    cost: cost(0, 0, 1),
    quantity: 1,
  },
  {
    id: 'waterskin',
    name: 'Waterskin',
    description: 'A leather pouch for carrying water.',
    category: 'adventuringGear',
    weight: 5,
    cost: cost(0, 2),
    quantity: 1,
  },
  {
    id: 'holy-symbol',
    name: 'Holy Symbol',
    description: 'A representation of a deity used for spellcasting.',
    category: 'adventuringGear',
    weight: 1,
    cost: cost(5),
    quantity: 1,
  },
  {
    id: 'arcane-focus',
    name: 'Arcane Focus (Crystal)',
    description: 'A crystal used to channel arcane magic.',
    category: 'adventuringGear',
    weight: 1,
    cost: cost(10),
    quantity: 1,
  },
  {
    id: 'component-pouch',
    name: 'Component Pouch',
    description: 'A pouch with material components for spellcasting.',
    category: 'adventuringGear',
    weight: 2,
    cost: cost(25),
    quantity: 1,
  },
  {
    id: 'thieves-tools',
    name: "Thieves' Tools",
    description: 'Lockpicks and tools for disabling traps.',
    category: 'tool',
    weight: 1,
    cost: cost(25),
    quantity: 1,
  },
]

// ============================================
// STARTING EQUIPMENT PACKS
// ============================================

export interface EquipmentPack {
  id: string
  name: string
  description: string
  cost: Currency
  items: string[] // item IDs
}

export const EQUIPMENT_PACKS: EquipmentPack[] = [
  {
    id: 'explorers-pack',
    name: "Explorer's Pack",
    description: 'Essentials for dungeon delving.',
    cost: cost(10),
    items: ['backpack', 'bedroll', 'tinderbox', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'waterskin', 'rope-hemp'],
  },
  {
    id: 'dungeoneers-pack',
    name: "Dungeoneer's Pack",
    description: 'Equipment for exploring underground.',
    cost: cost(12),
    items: ['backpack', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'torch', 'tinderbox', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'rations', 'waterskin', 'rope-hemp'],
  },
]

// ============================================
// ALL WEAPONS COMBINED
// ============================================

export const ALL_WEAPONS: Weapon[] = [
  ...SIMPLE_MELEE_WEAPONS,
  ...SIMPLE_RANGED_WEAPONS,
  ...MARTIAL_MELEE_WEAPONS,
  ...MARTIAL_RANGED_WEAPONS,
]

export const ALL_ARMOR: Armor[] = [
  ...LIGHT_ARMOR,
  ...MEDIUM_ARMOR,
  ...HEAVY_ARMOR,
]

// Helper to find equipment by ID
export function findWeaponById(id: string): Weapon | undefined {
  return ALL_WEAPONS.find(w => w.id === id)
}

export function findArmorById(id: string): Armor | undefined {
  return ALL_ARMOR.find(a => a.id === id)
}

export function findEquipmentById(id: string): Weapon | Armor | Shield | GenericEquipment | undefined {
  return (
    findWeaponById(id) ||
    findArmorById(id) ||
    SHIELDS.find(s => s.id === id) ||
    ADVENTURING_GEAR.find(g => g.id === id)
  )
}
